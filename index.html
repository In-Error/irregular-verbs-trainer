<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Irregular Verbs Trainer - British English</title>
<link href="https://fonts.googleapis.com/css2?family=Comic+Sans+MS&display=swap" rel="stylesheet">
<style>
  :root {
    --primary-color: #4f6ef7;
    --secondary-color: #9fc8ff;
    --correct-color: #00e676; /* –û—Å—Ç–∞–µ—Ç—Å—è –¥–ª—è –æ–±—â–µ–≥–æ "Correct!" */
    --wrong-color: #ff5252;
    --timer-color: #ffeb3b;
    --button-color: #4285f4;
    --button-hover: #3367d6;
    --button-active: #2a56c7;
    --text-color: #fff;
    --bg-transparent: rgba(255,255,255,0.1);
    --shadow: 0 8px 20px rgba(0,0,0,0.3);
    --verb-color: #FFD700; /* –ó–æ–ª–æ—Ç–æ–π –¥–ª—è –≥–ª–∞–≥–æ–ª–æ–≤ */
    --correct-full-color: #4CAF50; /* –ó–µ–ª–µ–Ω—ã–π –¥–ª—è "Correct!" */
    --wrong-full-color: #2196F3; /* –°–∏–Ω–∏–π –¥–ª—è "Wrong!" */

    /* –ù–æ–≤—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è –≤–∞—à–∏—Ö —Ü–≤–µ—Ç–æ–≤ */
    --matte-green: #4CAF50; /* –ú–∞—Ç–æ–≤–æ-–∑–µ–ª–µ–Ω—ã–π –¥–ª—è –∫–Ω–æ–ø–∫–∏ Start Game */
    --results-header-bright-green: #00FF00; /* –Ø—Ä–∫–æ-–∑–µ–ª–µ–Ω—ã–π –¥–ª—è "Results" */
    --player-label-color: #FFD700; /* –¶–≤–µ—Ç –¥–ª—è "Player:" - –æ—Å—Ç–∞–µ—Ç—Å—è */
    --answered-color: #00BFFF; /* –ë–∏—Ä—é–∑–æ–≤–æ-–≥–æ–ª—É–±–æ–π –¥–ª—è "You answered:" */
    --correct-answers-color-bright: #00FF00; /* –Ø—Ä–∫–æ-–∑–µ–ª–µ–Ω—ã–π –¥–ª—è "Correct answers:" –∏ —á–∏—Å–ª–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö */
    --total-answers-color-bright: #FF4500; /* –Ø—Ä–∫–æ-–æ—Ä–∞–Ω–∂–µ–≤—ã–π –¥–ª—è –æ–±—â–µ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ */
    --success-rate-color: #FFC107; /* –ñ–µ–ª—Ç—ã–π –¥–ª—è "Success rate:" - –æ—Å—Ç–∞–µ—Ç—Å—è */
    --date-color: #FFFFFF; /* –ë–µ–ª—ã–π –¥–ª—è "Date:" */

    /* –¶–≤–µ—Ç–∞ –¥–ª—è –∞—á–∏–≤–æ–∫ */
    --achievement-bg: rgba(255, 255, 255, 0.15);
    --achievement-border: #FFD700; /* –ó–æ–ª–æ—Ç–æ–π */
    --achievement-text: #FFD700; /* –ó–æ–ª–æ—Ç–æ–π */
    --achievement-unlocked: #4CAF50; /* –ó–µ–ª–µ–Ω—ã–π */
  }
  * {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
  }
  body {
    font-family: 'Comic Sans MS', cursive, sans-serif;
    background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
    color: var(--text-color);
    display: flex;
    justify-content: center;
    align-items: flex-start; /* –ò–∑–º–µ–Ω–µ–Ω–æ –Ω–∞ flex-start, —á—Ç–æ–±—ã –∫–æ–Ω—Ç–µ–Ω—Ç –Ω–µ —Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–ª—Å—è –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ */
    min-height: 100vh;
    margin: 0;
    padding: 20px;
    line-height: 1.6;
    overflow-y: auto;
    padding: 20px 0;
  }
  .container {
    background: rgba(0, 0, 0, 0.7);
    padding: 30px;
    border-radius: 15px;
    box-shadow: var(--shadow);
    text-align: center;
    width: 100%;
    max-width: 900px;
    margin-top: 20px; /* –û—Ç—Å—Ç—É–ø —Å–≤–µ—Ä—Ö—É –¥–ª—è —Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏—è */
    margin-bottom: 20px; /* –û—Ç—Å—Ç—É–ø —Å–Ω–∏–∑—É –¥–ª—è —Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏—è */
    backdrop-filter: blur(5px);
    position: relative;
    z-index: 1;
  }
  h1 {
    color: var(--verb-color);
    margin-bottom: 25px;
    font-size: 2.5em;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
    font-family: 'Comic Sans MS', cursive, sans-serif; /* –ï–¥–∏–Ω—ã–π —à—Ä–∏—Ñ—Ç */
  }

  /* –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è –ø–æ–ª–µ–π –≤–≤–æ–¥–∞ */
  .form-group {
    margin-bottom: 1.5rem;
    display: flex; /* –ò—Å–ø–æ–ª—å–∑—É–µ–º flexbox */
    align-items: center; /* –í—ã—Ä–∞–≤–Ω–∏–≤–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã –ø–æ —Ü–µ–Ω—Ç—Ä—É –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ */
    justify-content: center; /* –¶–µ–Ω—Ç—Ä–∏—Ä—É–µ–º –≥—Ä—É–ø–ø—É –ø–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª–∏ */
    gap: 1rem; /* –ü—Ä–æ–º–µ–∂—É—Ç–æ–∫ –º–µ–∂–¥—É label –∏ input/select */
  }
  .form-group label {
    display: inline-block; /* –¢–µ–ø–µ—Ä—å label –Ω–µ –∑–∞–Ω–∏–º–∞–µ—Ç –≤—Å—é —à–∏—Ä–∏–Ω—É */
    margin-bottom: 0; /* –£–±–∏—Ä–∞–µ–º –Ω–∏–∂–Ω–∏–π –æ—Ç—Å—Ç—É–ø */
    font-weight: bold;
    font-family: 'Comic Sans MS', cursive, sans-serif;
    font-size: 1.3rem; /* –ö—Ä—É–ø–Ω–µ–µ */
    color: var(--text-color); /* –ß—Ç–æ–±—ã —Ç–µ–∫—Å—Ç –±—ã–ª –≤–∏–¥–µ–Ω */
    text-shadow: 0 1px 2px rgba(0,0,0,0.2);
    animation: pulsateLabel 2s infinite alternate; /* –ê–Ω–∏–º–∞—Ü–∏—è –ø—É–ª—å—Å–∞—Ü–∏–∏ */
  }
  @keyframes pulsateLabel {
    0% { transform: scale(1); opacity: 1; }
    100% { transform: scale(1.03); opacity: 0.95; }
  }

  input[type="text"],
  select {
    width: auto; /* –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —à–∏—Ä–∏–Ω–∞, —á—Ç–æ–±—ã –Ω–µ –∑–∞–Ω–∏–º–∞—Ç—å –≤—Å—é —Å—Ç—Ä–æ–∫—É */
    min-width: 200px; /* –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —à–∏—Ä–∏–Ω–∞ –¥–ª—è —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏ */
    padding: 0.8rem;
    border-radius: 8px;
    border: 2px solid transparent;
    outline: none;
    font-size: 1.1rem;
    background: rgba(255,255,255,0.9);
    color: #333;
    font-family: 'Comic Sans MS', cursive, sans-serif; /* –ï–¥–∏–Ω—ã–π —à—Ä–∏—Ñ—Ç */
  }
  input:focus, select:focus {
    border-color: var(--primary-color);
    box-shadow: 0 0 0 3px rgba(79, 110, 247, 0.3);
  }
  .btn {
    /* –°—Ç–∏–ª–∏ –¥–ª—è –∫–Ω–æ–ø–∫–∏ Start Game */
    background-color: var(--matte-green); /* –ú–∞—Ç–æ–≤–æ-–∑–µ–ª–µ–Ω—ã–π */
    color: white;
    border: none;
    padding: 1rem 2rem;
    border-radius: 50px;
    cursor: pointer;
    font-size: 1.2rem;
    font-weight: bold;
    transition: all 0.3s ease;
    box-shadow: var(--shadow);
    margin-top: 1rem;
    font-family: 'Comic Sans MS', cursive, sans-serif;
    text-shadow: 0 1px 1px rgba(0,0,0,0.2);
    letter-spacing: 1px;
  }
  .btn:hover {
    transform: translateY(-3px);
    box-shadow:
      0 10px 15px rgba(0,0,0,0.25),
      0 4px 6px rgba(0,0,0,0.2),
      inset 0 2px 0 rgba(255,255,255,0.3),
      inset 0 -2px 0 rgba(0,0,0,0.2);
  }
  .timer {
    font-size: 1.4rem;
    color: var(--timer-color);
    margin-bottom: 1rem;
    font-weight: bold;
    display: inline-block; /* –ß—Ç–æ–±—ã –º–æ–∂–Ω–æ –±—ã–ª–æ —Ä—è–¥–æ–º —Å –æ—á–∫–∞–º–∏ */
  }
  /* –£–±—Ä–∞–Ω –±–ª–æ–∫ .score */
  .verb {
    font-size: 2.5rem;
    font-weight: bold;
    margin: 1.5rem 0;
    min-height: 3.5rem;
    display: flex;
    justify-content: center;
    align-items: center;
    color: var(--verb-color);
    text-shadow:
      0 1px 0 rgba(255,255,255,0.3),
      0 2px 0 rgba(255,255,255,0.2),
      0 3px 5px rgba(0,0,0,0.2);
    animation: popIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
    transform: scale(0);
    opacity: 0;
    font-family: 'Comic Sans MS', cursive, sans-serif;
  }
  @keyframes popIn {
    0% { transform: scale(0); opacity: 0; }
    80% { transform: scale(1.1); opacity: 1; }
    100% { transform: scale(1); opacity: 1; }
  }
  .full-screen-feedback {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 100;
    pointer-events: none;
    animation: fadeOut 1.5s ease 0.5s forwards; /* –£–≤–µ–ª–∏—á–µ–Ω–æ –≤—Ä–µ–º—è –∞–Ω–∏–º–∞—Ü–∏–∏ */
  }
  .feedback-text {
    font-size: 5rem;
    font-weight: bold;
    text-shadow:
      0 1px 0 rgba(255,255,255,0.3),
      0 2px 0 rgba(255,255,255,0.2),
      0 3px 5px rgba(0,0,0,0.2);
    animation: popIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
    transform: scale(0);
    opacity: 0;
    font-family: 'Comic Sans MS', cursive, sans-serif;
  }
  .correct-feedback {
    color: var(--correct-full-color);
  }
  .wrong-feedback {
    color: var(--wrong-full-color);
  }
  @keyframes fadeOut {
    to { opacity: 0; }
  }
  .translation {
    font-size: 1.2rem;
    margin-bottom: 1.5rem;
    font-style: italic;
    opacity: 0.8;
  }
  .inputs {
    display: flex;
    flex-wrap: wrap;
    justify-content: space-around;
    gap: 1rem;
    margin-bottom: 1.5rem;
  }
  .input-box {
    flex: 1 1 200px;
    padding: 0.8rem;
    font-size: 1.1rem;
    border-radius: 8px;
    border: 2px solid transparent;
    outline: none;
    text-align: center;
    background: rgba(255,255,255,0.9);
    color: #333;
    transition: all 0.3s ease;
    font-family: 'Comic Sans MS', cursive, sans-serif;
  }
  .input-box:focus {
    border-color: var(--primary-color);
    box-shadow: 0 0 0 3px rgba(79, 110, 247, 0.3);
  }
  .result {
    min-height: 2rem;
    font-size: 1.3rem;
    font-weight: bold;
    margin: 1rem 0;
    transition: all 0.3s ease;
  }
  .correct {
    color: var(--correct-color);
  }
  .wrong {
    color: var(--wrong-color);
  }
  .table-container {
    width: 100%;
    overflow-x: auto;
    margin: 1.5rem 0;
    border-radius: 8px;
    background: rgba(0,0,0,0.1);
  }
  .results-table {
    width: 100%;
    border-collapse: collapse;
    font-size: 0.9rem;
  }
  .results-table th,
  .results-table td {
    padding: 0.6rem;
    text-align: center;
    border: 1px solid rgba(255,255,255,0.2);
  }
  .results-table th {
    background: rgba(0,0,0,0.2);
    font-weight: bold;
  }
  .results-table tr:nth-child(even) {
    background: rgba(0,0,0,0.05);
  }
  .restart-btn {
    margin-top: 1rem;
    background: linear-gradient(
      to bottom,
      var(--button-color) 0%,
      var(--button-hover) 50%,
      var(--button-active) 100%
    );
    color: white;
    border: none;
    padding: 1rem 2rem;
    border-radius: 50px;
    cursor: pointer;
    font-size: 1.2rem;
    font-weight: bold;
    transition: all 0.3s ease;
    box-shadow:
      0 6px 10px rgba(0,0,0,0.2),
      0 2px 4px rgba(0,0,0,0.15),
      inset 0 2px 0 rgba(255,255,255,0.3),
      inset 0 -2px 0 rgba(0,0,0,0.2);
    position: relative;
    overflow: hidden;
    transform: translateY(0);
    font-family: 'Comic Sans MS', cursive, sans-serif;
    text-shadow: 0 1px 1px rgba(0,0,0,0.2);
    letter-spacing: 1px;
  }
  .restart-btn:hover {
    transform: translateY(-3px);
    box-shadow:
      0 10px 15px rgba(0,0,0,0.25),
      0 4px 6px rgba(0,0,0,0.2),
      inset 0 2px 0 rgba(255,255,255,0.3),
      inset 0 -2px 0 rgba(0,0,0,0.2);
  }
  .stats {
    font-size: 1.2rem;
    margin-bottom: 1rem;
    font-weight: bold;
    text-align: left; /* –í—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ –¥–ª—è —Å–ø–∏—Å–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ */
    margin-left: auto;
    margin-right: auto;
    max-width: fit-content; /* –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º —à–∏—Ä–∏–Ω—É –¥–ª—è —Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏—è */
  }
  .stats p {
    margin-bottom: 0.5rem;
    font-family: 'Comic Sans MS', cursive, sans-serif; /* –ï–¥–∏–Ω—ã–π —à—Ä–∏—Ñ—Ç */
  }
  .stats .player-name {
    color: var(--player-label-color); /* –ó–æ–ª–æ—Ç–æ–π */
  }
  .stats .answered-count {
    color: var(--answered-color); /* –¢–µ–º–Ω–æ-—Å–∏–Ω–∏–π */
  }
  .stats .correct-answers {
    color: var(--correct-answers-color-bright); /* –Ø—Ä–∫–æ-–∑–µ–ª–µ–Ω—ã–π –¥–ª—è "Correct answers:" –∏ —á–∏—Å–ª–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö */
  }
  .stats .total-number {
    color: var(--total-answers-color-bright); /* –Ø—Ä–∫–æ-–æ—Ä–∞–Ω–∂–µ–≤—ã–π –¥–ª—è –æ–±—â–µ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ */
  }
  .stats .success-rate {
    color: var(--success-rate-color); /* –ñ–µ–ª—Ç—ã–π */
  }
  .leaderboard {
    margin-top: 2rem;
    padding: 1.5rem;
    background: rgba(255, 215, 0, 0.1);
    border: 1px solid rgba(255, 215, 0, 0.3);
    border-radius: 12px;
    font-size: 1.1rem;
  }
  .leaderboard-title {
    font-size: 1.5rem;
    font-weight: bold;
    color: #FFD700;
    text-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
    margin-bottom: 1rem;
    font-family: 'Comic Sans MS', cursive, sans-serif; /* –ï–¥–∏–Ω—ã–π —à—Ä–∏—Ñ—Ç */
    animation: pulsate 1.5s infinite alternate; /* –ê–Ω–∏–º–∞—Ü–∏—è –ø—É–ª—å—Å–∞—Ü–∏–∏ */
  }
  @keyframes pulsate {
    0% { transform: scale(1); opacity: 1; text-shadow: 0 0 10px rgba(255, 215, 0, 0.5); }
    100% { transform: scale(1.05); opacity: 0.9; text-shadow: 0 0 20px rgba(255, 215, 0, 0.8); }
  }
  .leaderboard ol {
    text-align: left;
    padding-left: 1.5rem;
  }
  .leaderboard li {
    margin: 0.5rem 0;
    color: white;
    font-size: 0.95rem;
  }
  .results-header {
    font-family: 'Comic Sans MS', cursive, sans-serif;
    color: var(--results-header-bright-green); /* –Ø—Ä–∫–æ-–∑–µ–ª–µ–Ω—ã–π –¥–ª—è "Results" */
    font-size: 2rem;
    margin-bottom: 1rem;
    text-shadow: 0 2px 4px rgba(0,0,0,0.2);
    animation: pulsateResults 2s infinite alternate; /* –ê–Ω–∏–º–∞—Ü–∏—è –ø—É–ª—å—Å–∞—Ü–∏–∏ –¥–ª—è Results */
  }
  @keyframes pulsateResults {
    0% { transform: scale(1); opacity: 1; }
    100% { transform: scale(1.03); opacity: 0.95; text-shadow: 0 0 15px var(--results-header-bright-green); }
  }

  /* –°—Ç–∏–ª–∏ –¥–ª—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ */
  .modal {
    display: none; /* Hidden by default */
    position: fixed; /* Stay in place */
    z-index: 200; /* Sit on top */
    left: 0;
    top: 0;
    width: 100%; /* Full width */
    height: 100%; /* Full height */
    overflow: auto; /* Enable scroll if needed */
    background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
    justify-content: center;
    align-items: center;
    font-family: 'Comic Sans MS', cursive, sans-serif;
  }

  .modal-content {
    background-color: #fefefe;
    margin: auto;
    padding: 30px;
    border: 1px solid #888;
    width: 80%;
    max-width: 500px;
    border-radius: 15px;
    text-align: center;
    box-shadow: 0 5px 15px rgba(0,0,0,0.5);
    color: #333;
    font-size: 1.5rem;
    font-weight: bold;
  }

  .modal-content button {
    background-color: var(--matte-green);
    color: white;
    border: none;
    padding: 10px 20px;
    border-radius: 25px;
    cursor: pointer;
    font-size: 1.1rem;
    margin-top: 20px;
    transition: background-color 0.3s ease;
  }

  .modal-content button:hover {
    background-color: #45a049;
  }

  /* –°—Ç–∏–ª–∏ –¥–ª—è –∫–Ω–æ–ø–∫–∏ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è –≤ —Ç–∞–±–ª–∏—Ü–µ */
  .play-table-audio-btn {
      background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="white"><path d="M8 5v14l11-7z"/></svg>') no-repeat center center;
      background-size: 80%; /* –†–∞–∑–º–µ—Ä –∏–∫–æ–Ω–∫–∏ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è –≤–Ω—É—Ç—Ä–∏ –∫–Ω–æ–ø–∫–∏ */
      width: 20px; /* –†–∞–∑–º–µ—Ä —Å–∞–º–æ–π –∫–Ω–æ–ø–∫–∏ */
      height: 20px; /* –†–∞–∑–º–µ—Ä —Å–∞–º–æ–π –∫–Ω–æ–ø–∫–∏ */
      border: none;
      cursor: pointer;
      background-color: rgba(255, 255, 255, 0.2); /* –ù–µ–º–Ω–æ–≥–æ –ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π —Ñ–æ–Ω */
      border-radius: 50%; /* –ö—Ä—É–≥–ª–∞—è –∫–Ω–æ–ø–∫–∞ */
      vertical-align: middle; /* –í—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ —Å —Ç–µ–∫—Å—Ç–æ–º */
      margin-left: 5px; /* –û—Ç—Å—Ç—É–ø –æ—Ç —Ç–µ–∫—Å—Ç–∞ */
      transition: background-color 0.2s ease, transform 0.2s ease;
  }
  .play-table-audio-btn:hover {
      background-color: rgba(255, 255, 255, 0.4);
      transform: scale(1.1);
  }

 /* Achievements Styles */
  .achievements {
    margin-top: 30px;
    background: rgba(0, 0, 0, 0.4);
    padding: 20px;
    border-radius: 15px;
    box-shadow: inset 0 0 15px rgba(0,0,0,0.4);
    text-align: left;
  }

  .achievements-title {
    font-size: 1.8em;
    font-weight: bold;
    color: var(--verb-color);
    text-align: center;
    margin-bottom: 20px;
    text-shadow: 1px 1px 3px rgba(0,0,0,0.5);
  }

  .achievement-list {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
    gap: 15px;
    justify-content: center;
  }

  .achievement-item {
    background: rgba(255,255,255,0.08);
    padding: 15px;
    border-radius: 10px;
    text-align: center;
    opacity: 0.5; /* –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω—ã–µ */
    transition: opacity 0.3s ease;
    border: 2px dashed rgba(255,255,255,0.3); /* –ü—É–Ω–∫—Ç–∏—Ä–Ω–∞—è —Ä–∞–º–∫–∞ –¥–ª—è –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö */
  }

  .achievement-item.unlocked {
    opacity: 1; /* –†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é –≤–∏–¥–∏–º—ã */
    border: 2px solid var(--verb-color); /* –ó–æ–ª–æ—Ç–∞—è —Ä–∞–º–∫–∞ –¥–ª—è —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö */
    box-shadow: 0 0 15px var(--verb-color), 0 0 30px rgba(255,215,0,0.5); /* –°–∏—è–Ω–∏–µ */
  }

  .achievement-icon {
    font-size: 2.5em;
    margin-bottom: 5px;
    display: block;
  }

  .achievement-name {
    font-weight: bold;
    font-size: 1.1em;
    color: var(--text-color);
    margin-bottom: 5px;
  }

  .achievement-description {
    font-size: 0.9em;
    color: rgba(255,255,255,0.8);
  }

  /* Achievement Notification Styles */
  #achievementNotificationContainer {
    position: fixed;
    bottom: 20px;
    right: 20px;
    z-index: 1001;
    display: flex;
    flex-direction: column-reverse; /* –ù–æ–≤—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —Å–≤–µ—Ä—Ö—É */
    gap: 10px;
    pointer-events: none; /* –ß—Ç–æ–±—ã –Ω–µ –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –∫–ª–∏–∫–∏ –ø–æ–¥ –Ω–∏–º–∏ */
  }

  .achievement-notification {
    background-color: var(--verb-color); /* –ó–æ–ª–æ—Ç–æ–π —Ñ–æ–Ω */
    color: #333;
    padding: 15px 20px;
    border-radius: 10px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.5);
    font-weight: bold;
    font-size: 1.1em;
    text-align: center;
    animation: slideIn 0.5s ease-out forwards, fadeOut 1.5s 0.5s ease-out forwards;
    opacity: 0; /* –ù–∞—á–∏–Ω–∞–µ–º —Å–∫—Ä—ã—Ç—ã–º–∏ */
  }

  @keyframes slideInUp {
    to { opacity: 1; transform: translateY(0); }
  }

  @media (max-width: 600px) {
    .container {
      padding: 1.5rem;
    }
    h1 {
      font-size: 1.6rem;
    }
    .verb {
      font-size: 2rem;
    }
    .feedback-text {
      font-size: 3rem;
    }
    .inputs {
      flex-direction: column;
    }
    .input-box {
      width: 100%;
    }
    .results-table {
      font-size: 0.8rem;
    }
    .results-table th,
    .results-table td {
      padding: 0.4rem;
    }
    .restart-btn {
      padding: 0.8rem 1.5rem;
      font-size: 1.1rem;
    }
    /* –î–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö: label –Ω–∞–¥ input/select */
    .form-group {
      flex-direction: column; /* –≠–ª–µ–º–µ–Ω—Ç—ã –±—É–¥—É—Ç —Ä–∞—Å–ø–æ–ª–∞–≥–∞—Ç—å—Å—è —Å—Ç–æ–ª–±–∏–∫–æ–º */
      align-items: center; /* –¶–µ–Ω—Ç—Ä–∏—Ä—É–µ–º –ø–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª–∏ */
      gap: 0.5rem; /* –£–º–µ–Ω—å—à–∞–µ–º –ø—Ä–æ–º–µ–∂—É—Ç–æ–∫ */
    }
    .form-group label {
        font-size: 1.1rem; /* –ß—É—Ç—å –º–µ–Ω—å—à–µ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö */
    }
    input[type="text"], select {
      min-width: unset; /* –°–±—Ä–æ—Å min-width –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö */
      width: 100%; /* –ó–∞–Ω–∏–º–∞–µ—Ç –≤—Å—é –¥–æ—Å—Ç—É–ø–Ω—É—é —à–∏—Ä–∏–Ω—É */
      max-width: 250px; /* –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —à–∏—Ä–∏–Ω—ã */
    }
    .modal-content {
      width: 90%;
      font-size: 1.2rem;
    }
    .play-table-audio-btn {
        width: 18px;
        height: 18px;
    }
    .achievement-item {
        width: 100px;
        min-height: 100px;
    }
    .achievement-icon {
        font-size: 2rem;
    }
    .achievement-name {
        font-size: 0.8rem;
    }
    .achievement-description {
        font-size: 0.65rem;
    }
  }
</style>
</head>
<body>
  <div class="container" id="mainContainer"></div>
  <div id="feedbackContainer"></div>

  <div id="myModal" class="modal">
    <div class="modal-content">
      <p id="modalMessage"></p>
      <button id="modalOkBtn">OK</button>
    </div>
  </div>

  <div id="achievementNotificationContainer"></div>

<script>
// –ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –≥–ª–∞–≥–æ–ª–æ–≤
const verbs = [
  {base:"arise", past:"arose", participle:"arisen", ru:"–≤–æ–∑–Ω–∏–∫–∞—Ç—å"},
  {base:"awake", past:"awoke", participle:"awoken", ru:"–ø—Ä–æ—Å—ã–ø–∞—Ç—å—Å—è"},
  {base:"be", past:"was were", participle:"been", ru:"–±—ã—Ç—å"},
  {base:"bear", past:"bore", participle:"born", ru:"–Ω–µ—Å—Ç–∏, —Ä–æ–∂–∞—Ç—å"},
  {base:"beat", past:"beat", participle:"beaten", ru:"–±–∏—Ç—å"},
  {base:"become", past:"became", participle:"become", ru:"—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è"},
  {base:"begin", past:"began", participle:"begun", ru:"–Ω–∞—á–∏–Ω–∞—Ç—å"},
  {base:"bend", past:"bent", participle:"bent", ru:"—Å–≥–∏–±–∞—Ç—å"},
  {base:"bet", past:"bet", participle:"bet", ru:"–¥–µ—Ä–∂–∞—Ç—å –ø–∞—Ä–∏"},
  {base:"bind", past:"bound", participle:"bound", ru:"—Å–≤—è–∑—ã–≤–∞—Ç—å"},
  {base:"bite", past:"bit", participle:"bitten", ru:"–∫—É—Å–∞—Ç—å"},
  {base:"bleed", past:"bled", participle:"bled", ru:"–∫—Ä–æ–≤–æ—Ç–æ—á–∏—Ç—å"},
  {base:"blow", past:"blew", participle:"blown", ru:"–¥—É—Ç—å"},
  {base:"break", past:"broke", participle:"broken", ru:"–ª–æ–º–∞—Ç—å"},
  {base:"breed", past:"bred", participle:"bred", ru:"—Ä–∞–∑–≤–æ–¥–∏—Ç—å"},
  {base:"bring", past:"brought", participle:"brought", ru:"–ø—Ä–∏–Ω–æ—Å–∏—Ç—å"},
  {base:"broadcast", past:"broadcast", participle:"broadcast", ru:"—Ç—Ä–∞–Ω—Å–ª–∏—Ä–æ–≤–∞—Ç—å"},
  {base:"build", past:"built", participle:"built", ru:"—Å—Ç—Ä–æ–∏—Ç—å"},
  {base:"burn", past:"burnt", participle:"burnt", ru:"–∂–µ—á—å"},
  {base:"burst", past:"burst", participle:"burst", ru:"–≤–∑—Ä—ã–≤–∞—Ç—å—Å—è"},
  {base:"buy", past:"bought", participle:"bought", ru:"–ø–æ–∫—É–ø–∞—Ç—å"},
  {base:"catch", past:"caught", participle:"caught", ru:"–ª–æ–≤–∏—Ç—å"},
  {base:"choose", past:"chose", participle:"chosen", ru:"–≤—ã–±–∏—Ä–∞—Ç—å"},
  {base:"cling", past:"clung", participle:"clung", ru:"—Ü–µ–ø–ª—è—Ç—å—Å—è"},
  {base:"come", past:"came", participle:"come", ru:"–ø—Ä–∏—Ö–æ–¥–∏—Ç—å"},
  {base:"cost", past:"cost", participle:"cost", ru:"—Å—Ç–æ–∏—Ç—å"},
  {base:"creep", past:"crept", participle:"crept", ru:"–ø–æ–ª–∑—Ç–∏"},
  {base:"cut", past:"cut", participle:"cut", ru:"—Ä–µ–∑–∞—Ç—å"},
  {base:"deal", past:"dealt", participle:"dealt", ru:"–∏–º–µ—Ç—å –¥–µ–ª–æ"},
  {base:"dig", past:"dug", participle:"dug", ru:"–∫–æ–ø–∞—Ç—å"},
  {base:"do", past:"did", participle:"done", ru:"–¥–µ–ª–∞—Ç—å"},
  {base:"draw", past:"drew", participle:"drawn", ru:"—Ä–∏—Å–æ–≤–∞—Ç—å"},
  {base:"dream", past:"dreamt", participle:"dreamt", ru:"–º–µ—á—Ç–∞—Ç—å"},
  {base:"drink", past:"drank", participle:"drunk", ru:"–ø–∏—Ç—å"},
  {base:"drive", past:"drove", participle:"driven", ru:"–≤–æ–¥–∏—Ç—å"},
  {base:"eat", past:"ate", participle:"eaten", ru:"–µ—Å—Ç—å"},
  {base:"fall", past:"fell", participle:"fallen", ru:"–ø–∞–¥–∞—Ç—å"},
  {base:"feed", past:"fed", participle:"fed", ru:"–∫–æ—Ä–º–∏—Ç—å"},
  {base:"feel", past:"felt", participle:"felt", ru:"—á—É–≤—Å—Ç–≤–æ–≤–∞—Ç—å"},
  {base:"fight", past:"fought", participle:"fought", ru:"—Å—Ä–∞–∂–∞—Ç—å—Å—è"},
  {base:"find", past:"found", participle:"found", ru:"–Ω–∞—Ö–æ–¥–∏—Ç—å"},
  {base:"fly", past:"flew", participle:" flown", ru:"–ª–µ—Ç–∞—Ç—å"},
  {base:"forbid", past:"forbade", participle:"forbidden", ru:"–∑–∞–ø—Ä–µ—â–∞—Ç—å"},
  {base:"forget", past:"forgot", participle:"forgotten", ru:"–∑–∞–±—ã–≤–∞—Ç—å"},
  {base:"forgive", past:"forgave", participle:"forgiven", ru:"–ø—Ä–æ—â–∞—Ç—å"},
  {base:"freeze", past:"froze", participle:"frozen", ru:"–∑–∞–º–µ—Ä–∑–∞—Ç—å"},
  {base:"get", past:"got", participle:"got", ru:"–ø–æ–ª—É—á–∞—Ç—å"},
  {base:"give", past:"gave", participle:"given", ru:"–¥–∞–≤–∞—Ç—å"},
  {base:"go", past:"went", participle:"gone", ru:"–∏–¥—Ç–∏"},
  {base:"grind", past:"ground", participle:"ground", ru:"–º–æ–ª–æ—Ç—å"},
  {base:"grow", past:"grew", participle:"grown", ru:"—Ä–∞—Å—Ç–∏"},
  {base:"hang", past:"hung", participle:"hung", ru:"–≤–µ—à–∞—Ç—å"},
  {base:"have", past:"had", participle:"had", ru:"–∏–º–µ—Ç—å"},
  {base:"hear", past:"heard", participle:"heard", ru:"—Å–ª—ã—à–∞—Ç—å"},
  {base:"hide", past:"hid", participle:"hidden", ru:"–ø—Ä—è—Ç–∞—Ç—å"},
  {base:"hit", past:"hit", participle:"hit", ru:"—É–¥–∞—Ä—è—Ç—å"},
  {base:"hold", past:"held", participle:"held", ru:"–¥–µ—Ä–∂–∞—Ç—å"},
  {base:"hurt", past:"hurt", participle:"hurt", ru:"—Ä–∞–Ω–∏—Ç—å"},
  {base:"keep", past:"kept", participle:"kept", ru:"–¥–µ—Ä–∂–∞—Ç—å"},
  {base:"kneel", past:"knelt", participle:"knelt", ru:"—Å—Ç–æ—è—Ç—å –Ω–∞ –∫–æ–ª–µ–Ω—è—Ö"},
  {base:"know", past:"knew", participle:"known", ru:"–∑–Ω–∞—Ç—å"},
  {base:"lay", past:"laid", participle:"laid", ru:"–∫–ª–∞—Å—Ç—å"},
  {base:"lead", past:"led", participle:"led", ru:"–≤–µ—Å—Ç–∏"},
  {base:"lean", past:"leant", participle:"leant", ru:"–Ω–∞–∫–ª–æ–Ω—è—Ç—å—Å—è"},
  {base:"learn", past:"learnt", participle:"learnt", ru:"—É—á–∏—Ç—å"},
  {base:"leave", past:"left", participle:"left", ru:"–ø–æ–∫–∏–¥–∞—Ç—å"},
  {base:"lend", past:"lent", participle:"lent", ru:"–æ–¥–∞–ª–∂–∏–≤–∞—Ç—å"},
  {base:"lie", past:"lay", participle:"lain", ru:"–ª–µ–∂–∞—Ç—å"},
  {base:"light", past:"lit", participle:"lit", ru:"–∑–∞–∂–∏–≥–∞—Ç—å"},
  {base:"lose", past:"lost", participle:"lost", ru:"—Ç–µ—Ä—è—Ç—å"},
  {base:"make", past:"made", participle:"made", ru:"–¥–µ–ª–∞—Ç—å"},
  {base:"mean", past:"meant", participle:"meant", ru:"–∑–Ω–∞—á–∏—Ç—å"},
  {base:"meet", past:"met", participle:"met", ru:"–≤—Å—Ç—Ä–µ—á–∞—Ç—å"},
  {base:"mow", past:"mowed", participle:"mown", ru:"–∫–æ—Å–∏—Ç—å"},
  {base:"overtake", past:"overtook", participle:"overtaken", ru:"–æ–±–≥–æ–Ω—è—Ç—å"},
  {base:"pay", past:"paid", participle:"paid", ru:"–ø–ª–∞—Ç–∏—Ç—å"},
  {base:"put", past:"put", participle:"put", ru:"–∫–ª–∞—Å—Ç—å"},
  {base:"read", past:"read", participle:"read", ru:"—á–∏—Ç–∞—Ç—å"},
  {base:"ride", past:"rode", participle:"ridden", ru:"–µ–∑–¥–∏—Ç—å –≤–µ—Ä—Ö–æ–º"},
  {base:"ring", past:"rang", participle:"rung", ru:"–∑–≤–æ–Ω–∏—Ç—å"},
  {base:"rise", past:"rose", participle:"risen", ru:"–ø–æ–¥–Ω–∏–º–∞—Ç—å—Å—è"},
  {base:"run", past:"ran", participle:"run", ru:"–±–µ–∂–∞—Ç—å"},
  {base:"saw", past:"sawed", participle:"sawn", ru:"–ø–∏–ª–∏—Ç—å"},
  {base:"say", past:"said", participle:"said", ru:"—Å–∫–∞–∑–∞—Ç—å"},
  {base:"see", past:"saw", participle:"seen", ru:"–≤–∏–¥–µ—Ç—å"},
  {base:"sell", past:"sold", participle:"sold", ru:"–ø—Ä–æ–¥–∞–≤–∞—Ç—å"},
  {base:"send", past:"sent", participle:"sent", ru:"–æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å"},
  {base:"set", past:"set", participle:"set", ru:"—É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å"},
  {base:"sew", past:"sewed", participle:"sewn", ru:"—à–∏—Ç—å"},
  {base:"shake", past:"shook", participle:"shaken", ru:"—Ç—Ä—è—Å—Ç–∏"},
  {base:"shed", past:"shed", participle:"shed", ru:"–ø—Ä–æ–ª–∏–≤–∞—Ç—å"},
  {base:"shine", past:"shone", participle:"shone", ru:"—Å–≤–µ—Ç–∏—Ç—å"},
  {base:"shoot", past:"shot", participle:"shot", ru:"—Å—Ç—Ä–µ–ª—è—Ç—å"},
  {base:"show", past:"showed", participle:"shown", ru:"–ø–æ–∫–∞–∑—ã–≤–∞—Ç—å"},
  {base:"shrink", past:"shrank", participle:"shrunk", ru:"—Å–∂–∏–º–∞—Ç—å—Å—è"},
  {base:"shut", past:"shut", participle:"shut", ru:"–∑–∞–∫—Ä—ã–≤–∞—Ç—å"},
  {base:"sing", past:"sang", participle:"sung", ru:"–ø–µ—Ç—å"},
  {base:"sink", past:"sank", participle:"sunk", ru:"—Ç–æ–Ω—É—Ç—å"},
  {base:"sit", past:"sat", participle:"sat", ru:"—Å–∏–¥–µ—Ç—å"},
  {base:"sleep", past:"slept", participle:"slept", ru:"—Å–ø–∞—Ç—å"},
  {base:"slide", past:"slid", participle:"slid", ru:"—Å–∫–æ–ª—å–∑–∏—Ç—å"},
  {base:"smell", past:"smelt", participle:"smelt", ru:"–Ω—é—Ö–∞—Ç—å"},
  {base:"sow", past:"sowed", participle:"sown", ru:"—Å–µ—è—Ç—å"},
  {base:"speak", past:"spoke", participle:"spoken", ru:"–≥–æ–≤–æ—Ä–∏—Ç—å"},
  {base:"spell", past:"spelt", participle:"spelt", ru:"–ø—Ä–æ–∏–∑–Ω–æ—Å–∏—Ç—å –ø–æ –±—É–∫–≤–∞–º"},
  {base:"spend", past:"spent", participle:"spent", ru:"—Ç—Ä–∞—Ç–∏—Ç—å"},
  {base:"spill", past:"spilt", participle:"spilt", ru:"–ø—Ä–æ–ª–∏–≤–∞—Ç—å"},
  {base:"spin", past:"spun", participle:"spun", ru:"–ø—Ä—è—Å—Ç—å"},
  {base:"spit", past:"spat", participle:"spat", ru:"–ø–ª–µ–≤–∞—Ç—å"},
  {base:"spread", past:"spread", participle:"spread", ru:"—Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è—Ç—å"},
  {base:"stand", past:"stood", participle:"stood", ru:"—Å—Ç–æ—è—Ç—å"},
  {base:"steal", past:"stole", participle:"stolen", ru:"–∫—Ä–∞—Å—Ç—å"},
  {base:"stick", past:"stuck", participle:"stuck", ru:"–ø—Ä–∏–∫–ª–µ–∏–≤–∞—Ç—å"},
  {base:"sting", past:"stung", participle:"stung", ru:"–∂–∞–ª–∏—Ç—å"},
  {base:"stink", past:"stank", participle:"stunk", ru:"–≤–æ–Ω—è—Ç—å"},
  {base:"strike", past:"struck", participle:"struck", ru:"—É–¥–∞—Ä—è—Ç—å"},
  {base:"swear", past:"swore", participle:"sworn", ru:"–∫–ª—è—Å—Ç—å—Å—è"},
  {base:"sweep", past:"swept", participle:"swept", ru:"–ø–æ–¥–º–µ—Ç–∞—Ç—å"},
  {base:"swell", past:"swelled", participle:"swollen", ru:"–æ–ø—É—Ö–∞—Ç—å"},
  {base:"swim", past:"swam", participle:"swum", ru:"–ø–ª–∞–≤–∞—Ç—å"},
  {base:"swing", past:"swung", participle:"swung", ru:"–∫–∞—á–∞—Ç—å—Å—è"},
  {base:"take", past:"took", participle:"taken", ru:"–±—Ä–∞—Ç—å"},
  {base:"teach", past:"taught", participle:"taught", ru:"—É—á–∏—Ç—å"},
  {base:"tear", past:"tore", participle:"torn", ru:"—Ä–≤–∞—Ç—å"},
  {base:"tell", past:"told", participle:"told", ru:"—Ä–∞—Å—Å–∫–∞–∑—ã–≤–∞—Ç—å"},
  {base:"think", past:"thought", participle:"thought", ru:"–¥—É–º–∞—Ç—å"},
  {base:"throw", past:"threw", participle:"thrown", ru:"–±—Ä–æ—Å–∞—Ç—å"},
  {base:"understand", past:"understood", participle:"understood", ru:"–ø–æ–Ω–∏–º–∞—Ç—å"},
  {base:"wake", past:"woke", participle:"woken", ru:"–ø—Ä–æ—Å—ã–ø–∞—Ç—å—Å—è"},
  {base:"wear", past:"wore", participle:"worn", ru:"–Ω–æ—Å–∏—Ç—å"},
  {base:"weep", past:"wept", participle:"wept", ru:"–ø–ª–∞–∫–∞—Ç—å"},
  {base:"win", past:"won", participle:"won", ru:"–≤—ã–∏–≥—Ä—ã–≤–∞—Ç—å"},
  {base:"wind", past:"wound", participle:"wound", ru:"–∑–∞–≤–æ–¥–∏—Ç—å (–º–µ—Ö–∞–Ω–∏–∑–º)"},
  {base:"withdraw", past:"withdrew", participle:"withdrawn", ru:"–∏–∑—ã–º–∞—Ç—å"},
  {base:"write", past:"wrote", participle:"written", ru:"–ø–∏—Å–∞—Ç—å"}
];

// –§–∏–ª—å—Ç—Ä—É–µ–º common –≥–ª–∞–≥–æ–ª—ã (–≤—Å–µ –∫—Ä–æ–º–µ lessCommon –∏ advanced)
const lessCommonList = ["arise","awake","bear","bend","bet","bleed","breed","broadcast","deal","kneel","mow","overtake","sew","stink","strike"];
const advancedList = ["bind","burst","cling","creep","grind","saw","shed","sow","spit","swell","weep","wind"];
const commonVerbs = verbs.filter(v => !lessCommonList.includes(v.base) && !advancedList.includes(v.base));

// –î–µ–ª–∏–º common –Ω–∞ 5 —á–∞—Å—Ç–µ–π –ø–æ 21 –≥–ª–∞–≥–æ–ª—É
const commonParts = [];
for (let i = 0; i < 5; i++) {
  commonParts[i] = commonVerbs.slice(i * 21, (i + 1) * 21);
}

// –ì—Ä—É–ø–ø—ã –∏ –∏—Ö –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º—ã–µ –∏–º–µ–Ω–∞
const verbGroups = {
  common1: { verbs: commonParts[0], name: "Common (part 1)" },
  common2: { verbs: commonParts[1], name: "Common (part 2)" },
  common3: { verbs: commonParts[2], name: "Common (part 3)" },
  common4: { verbs: commonParts[3], name: "Common (part 4)" },
  common5: { verbs: commonParts[4], name: "Common (part 5)" },
  lessCommon: { verbs: verbs.filter(v => lessCommonList.includes(v.base)), name: "Less Common (15 verbs)" },
  advanced: { verbs: verbs.filter(v => advancedList.includes(v.base)), name: "Advanced (12 verbs)" },
  all: { verbs: verbs, name: "All (132 verbs)" }
};

// –°–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è –≤—Å–ø–ª—ã–≤–∞—é—â–µ–≥–æ –æ–∫–Ω–∞ (–≤—Å–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ)
const allCorrectMessages = [
  "Wow, cool! Jump to the next training!",
  "Yay! The next training is calling you - go, go, go!",
  "Great! Run to the next one, superhero!",
  "Nice! The next training is waiting - don‚Äôt be lazy!",
  "Hooray! Show the next training who‚Äôs the boss!",
  "Awesome! One more training and you‚Äôll be a star!",
  "Good job! Next level - let‚Äôs go!",
  "Wow! The next training can‚Äôt wait for you!"
];

// –°–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è –≤—Å–ø–ª—ã–≤–∞—é—â–µ–≥–æ –æ–∫–Ω–∞ (–Ω–µ –≤—Å–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ)
const notAllCorrectMessages = [
  "Almost there! Next time you‚Äôll be the champion!",
  "Good try! You‚Äôre getting better and better!",
  "Nice work! A little more practice - and you‚Äôll smash it!",
  "You‚Äôre awesome anyway! Try again and win next time!",
  "So close! One more go and you‚Äôll get it!",
  "Don‚Äôt worry! Even superheroes train a lot!",
  "Great effort! The top score is waiting for you!",
  "Keep going! Every try makes you stronger!"
];

// –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π
const achievements = {
  novice: { name: "Novice", description: "Complete your first game.", icon: "üåü" },
  master_common1: { name: "Master Common 1", description: "100% correct in Common (part 1).", icon: "ü•á" },
  master_common2: { name: "Master Common 2", description: "100% correct in Common (part 2).", icon: "ü•á" },
  master_common3: { name: "Master Common 3", description: "100% correct in Common (part 3).", icon: "ü•á" },
  master_common4: { name: "Master Common 4", description: "100% correct in Common (part 4).", icon: "ü•á" },
  master_common5: { name: "Master Common 5", description: "100% correct in Common (part 5).", icon: "ü•á" },
  master_lessCommon: { name: "Master Less Common", description: "100% correct in Less Common.", icon: "üèÜ" },
  master_advanced: { name: "Master Advanced", description: "100% correct in Advanced.", icon: "üèÖ" },
  ultimate_champion: { name: "Ultimate Champion", description: "100% correct in All verbs.", icon: "üëë" },
};

class VerbsTrainer {
  constructor() {
    this.players = JSON.parse(localStorage.getItem('verbPlayers') || '{}');
    this.currentPlayer = null;
    this.currentVerbGroupKey = null; // –î–æ–±–∞–≤–ª–µ–Ω–æ –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∫–ª—é—á–∞ –≥—Ä—É–ø–ø—ã
    this.verbs = [];
    this.currentIndex = 0;
    this.timeLeft = 30;
    this.timer = null;
    this.results = []; // –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ–∫—É—â–µ–π –∏–≥—Ä—ã
    this.gameStartTime = null; // –î–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞—á–∞–ª–∞ –∏–≥—Ä—ã
    this.britishVoice = null; // –î–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–∞–π–¥–µ–Ω–Ω–æ–≥–æ –±—Ä–∏—Ç–∞–Ω—Å–∫–æ–≥–æ –≥–æ–ª–æ—Å–∞
    // this.currentScore = 0; // –£–¥–∞–ª–µ–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –¥–ª—è –æ—á–∫–æ–≤

    this.initializeSpeechSynthesis(); // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–∏–Ω—Ç–µ–∑–∞ —Ä–µ—á–∏
    this.initialize();
  }

  initializeSpeechSynthesis() {
      if ('speechSynthesis' in window) {
          speechSynthesis.onvoiceschanged = () => {
              const voices = speechSynthesis.getVoices();
              this.britishVoice = voices.find(voice => voice.lang === 'en-GB' || (voice.lang.startsWith('en-') && voice.name.includes('UK')));
              if (!this.britishVoice) {
                  this.britishVoice = voices.find(voice => voice.lang.startsWith('en-'));
              }
              if (!this.britishVoice) {
                  console.warn("No English voice found for speech synthesis.");
              }
          };
          speechSynthesis.getVoices(); 
      } else {
          console.warn("Web Speech API is not supported in this browser.");
      }
  }

  playSpeech(text) {
      if (!text || !('speechSynthesis' in window)) {
          console.warn("Speech synthesis not available or no text provided.");
          return;
      }
      speechSynthesis.cancel(); 

      const utterance = new SpeechSynthesisUtterance(text);
      utterance.lang = 'en-GB';

      if (this.britishVoice) {
          utterance.voice = this.britishVoice;
      } else {
          utterance.lang = 'en-US';
      }
      
      speechSynthesis.speak(utterance);
  }

  initialize() {
    this.showStartScreen();
  }
  
  showStartScreen() {
    const lastPlayerName = localStorage.getItem('lastPlayerName') || '';
    const lastVerbGroupKey = localStorage.getItem('lastVerbGroupKey') || 'common1';

    document.getElementById("mainContainer").innerHTML = `
      <h1>Irregular Verbs Trainer</h1>
      <div class="form-group">
        <label for="playerName">Your Name:</label>
        <input type="text" id="playerName" placeholder="Enter your name" value="${lastPlayerName}" />
      </div>
      <div class="form-group">
        <label for="verbGroup">Verb Group:</label>
        <select id="verbGroup">
          ${Object.keys(verbGroups).map(key => 
            `<option value="${key}" ${key === lastVerbGroupKey ? 'selected' : ''}>${verbGroups[key].name}</option>`
          ).join('')}
        </select>
      </div>
      <button class="btn" id="startBtn">Start Game</button>
      ${this.getLeaderboardHTML()}
      ${this.getAchievementsHTML()}
      <button class="restart-btn" id="deleteMyResultsBtn" style="background: #f44336; margin-top: 1rem;">Delete My Results</button>
    `;
    document.getElementById("startBtn").addEventListener("click", () => {
      const name = document.getElementById("playerName").value.trim();
      if (!name) {
        alert("Please enter your name!");
        return;
      }
      const groupKey = document.getElementById("verbGroup").value;

      localStorage.setItem('lastPlayerName', name);
      localStorage.setItem('lastVerbGroupKey', groupKey);

      this.startGame(name, groupKey);
    });
    document.getElementById("deleteMyResultsBtn").addEventListener("click", () => {
      const name = prompt("Enter your name to delete results:");
      if (name && this.players[name]) {
        if (confirm(`Delete all results for ${name}?`)) {
          delete this.players[name];
          localStorage.setItem('verbPlayers', JSON.stringify(this.players));
          alert(`Results for ${name} deleted.`);
          localStorage.removeItem('lastPlayerName'); 
          localStorage.removeItem('lastVerbGroupKey');
          this.showStartScreen();
        }
      } else {
        alert("No results found for this name.");
      }
    });
  }

  startGame(name, groupKey) {
    this.currentPlayer = name;
    this.currentVerbGroupKey = groupKey;
    this.verbs = [...verbGroups[groupKey].verbs];
    this.shuffleVerbs();
    this.currentIndex = 0;
    this.results = [];
    // this.currentScore = 0; // –£–¥–∞–ª–µ–Ω–æ —Å–±—Ä–æ—Å –æ—á–∫–æ–≤
    this.gameStartTime = Date.now();

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä–æ–∫–∞, –µ—Å–ª–∏ –µ–≥–æ –Ω–µ—Ç
    if (!this.players[this.currentPlayer]) {
        this.players[this.currentPlayer] = {
            records: [],
            achievements: {},
            // totalScore: 0 // –£–¥–∞–ª–µ–Ω–æ totalScore
        };
        localStorage.setItem('verbPlayers', JSON.stringify(this.players)); // –°–æ—Ö—Ä–∞–Ω—è–µ–º –Ω–æ–≤–æ–≥–æ –∏–≥—Ä–æ–∫–∞
    }


    document.getElementById("mainContainer").innerHTML = `
      <h1>Hi, ${this.currentPlayer}!</h1>
      <div class="timer">Time left: <span id="timer">30</span> sec</div>
      <div class="verb" id="verb"></div>
      <div class="translation" id="translation"></div>
      <div class="inputs">
        <input type="text" class="input-box" id="pastSimple" placeholder="Past Simple" autocomplete="off" />
        <input type="text" class="input-box" id="pastParticiple" placeholder="Past Participle" autocomplete="off" />
      </div>
      <p class="result" id="result"></p>
    `;
    document.getElementById("pastSimple").addEventListener("keydown", e => {
      if (e.key === "Enter") document.getElementById("pastParticiple").focus();
    });
    document.getElementById("pastParticiple").addEventListener("keydown", e => {
      if (e.key === "Enter") this.checkAnswer();
    });
    this.loadVerb();
  }

  shuffleVerbs() {
    for (let i = this.verbs.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [this.verbs[i], this.verbs[j]] = [this.verbs[j], this.verbs[i]];
    }
  }

  loadVerb() {
    const currentVerb = this.verbs[this.currentIndex];
    document.getElementById("verb").textContent = currentVerb.base.toUpperCase();
    document.getElementById("translation").textContent = currentVerb.ru;
    document.getElementById("pastSimple").value = "";
    document.getElementById("pastParticiple").value = "";
    document.getElementById("result").textContent = "";
    document.getElementById("pastSimple").focus();
    this.startTimer();
  }

startTimer() {
    clearInterval(this.timer);
    this.timeLeft = 30;
    document.getElementById("timer").textContent = this.timeLeft;
    this.timer = setInterval(() => {
      this.timeLeft--;
      document.getElementById("timer").textContent = this.timeLeft;
      if (this.timeLeft <= 0) {
        clearInterval(this.timer);
        this.showResults();
      }
    }, 1000);
  }

  checkAnswer() {
    const psInput = document.getElementById("pastSimple").value.trim().toLowerCase();
    const ppInput = document.getElementById("pastParticiple").value.trim().toLowerCase();
    const currentVerb = this.verbs[this.currentIndex];

    // –ò–∑–º–µ–Ω–µ–Ω–æ: –∏—Å–ø–æ–ª—å–∑—É–µ–º checkForm –¥–ª—è Past Simple –≤—Å–µ–≥–¥–∞
    const isPsCorrect = this.checkForm(psInput, currentVerb.past);
    const isPpCorrect = this.checkForm(ppInput, currentVerb.participle);
    const isCorrect = isPsCorrect && isPpCorrect;
    
    // –£–¥–∞–ª–µ–Ω—ã —Å—Ç—Ä–æ–∫–∏, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å currentScore
    // if (isCorrect) {
    //   this.currentScore += 10;
    //   document.getElementById("score").textContent = this.currentScore;
    // }

    this.saveResult(isCorrect);
    
    if (isCorrect) {
      this.currentIndex++;
      if (this.currentIndex < this.verbs.length) {
        this.loadVerb(); 
      } else {
        const correctAnswers = this.results.filter(r => r.correct).length;
        if (correctAnswers === this.verbs.length) {
            this.showCompletionModal(true, true);
        } else {
            this.showCompletionModal(false, true);
        }
      }
    } else {
      this.showCompletionModal(false, true); 
    }
  }

  // –ò–∑–º–µ–Ω–µ–Ω–æ: —É–ª—É—á—à–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è checkForm –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ—Å—Ç–∞–≤–Ω—ã—Ö —Ñ–æ—Ä–º
  checkForm(input, correctForms) {
    const formsArray = correctForms.toLowerCase().split(' ').map(f => f.trim());
    // –î–æ–±–∞–≤–ª—è–µ–º —Å–∞–º—É —Ñ—Ä–∞–∑—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, "was were") –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω—ã–π –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç, –µ—Å–ª–∏ –æ–Ω–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç –ø—Ä–æ–±–µ–ª
    if (correctForms.toLowerCase().includes(' ')) {
        formsArray.push(correctForms.toLowerCase());
    }
    return formsArray.includes(input);
  }

  saveResult(correct) {
    const currentVerb = this.verbs[this.currentIndex];
    this.results.push({
      verb: currentVerb.base,
      correct: correct,
      yourPs: document.getElementById("pastSimple").value.trim() || "-",
      yourPp: document.getElementById("pastParticiple").value.trim() || "-",
      correctPs: currentVerb.past,
      correctPp: currentVerb.participle,
      ru: currentVerb.ru
    });
  }

  showCompletionModal(allCorrectForMessage, showResultsAfterConfirm) {
    clearInterval(this.timer);
    const messages = allCorrectForMessage ? allCorrectMessages : notAllCorrectMessages;
    const randomMessage = messages[Math.floor(Math.random() * messages.length)];
    const modal = document.getElementById("myModal");
    const modalMessage = document.getElementById("modalMessage");
    const modalOkBtn = document.getElementById("modalOkBtn");

    modalMessage.textContent = randomMessage;
    modal.style.display = "flex";

    // –§—É–Ω–∫—Ü–∏—è –∑–∞–∫—Ä—ã—Ç–∏—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
    const closeModal = () => {
      modal.style.display = "none";
      if (showResultsAfterConfirm) {
        this.showResults();
      } else {
        this.loadVerb();
      }
    };

    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞
    modalOkBtn.onclick = closeModal;

    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –Ω–∞–∂–∞—Ç–∏—è –∫–ª–∞–≤–∏—à
    const keyHandler = (e) => {
      if (e.key === "Enter") {
        closeModal();
        // –£–±–∏—Ä–∞–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫, —á—Ç–æ–±—ã –Ω–µ –Ω–∞–∫–∞–ø–ª–∏–≤–∞–ª–∏—Å—å
        modal.removeEventListener("keydown", keyHandler);
      }
    };

    // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫ –º–æ–¥–∞–ª—å–Ω–æ–º—É –æ–∫–Ω—É
    modal.addEventListener("keydown", keyHandler);

    // –¢–∞–∫–∂–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ñ–æ–∫—É—Å –Ω–∞ –∫–Ω–æ–ø–∫—É (—á—Ç–æ–±—ã Enter —Ä–∞–±–æ—Ç–∞–ª —Å—Ä–∞–∑—É)
    setTimeout(() => modalOkBtn.focus(), 100);
  }

  showResults() {
    clearInterval(this.timer);
    const total = this.verbs.length;
    const correct = this.results.filter(r => r.correct).length;
    const percent = Math.round((correct / total) * 100) || 0;
    const now = new Date();
    const gameEndTime = Date.now();
    const timeTakenMs = gameEndTime - this.gameStartTime;
    
    const minutes = Math.floor(timeTakenMs / 60000);
    const seconds = ((timeTakenMs % 60000) / 1000).toFixed(0);
    const formattedTime = `${minutes}m ${seconds < 10 ? '0' : ''}${seconds}s`;

    const gameTime = now.toLocaleTimeString('en-GB', { hour: '2-digit', minute: '2-digit' });

    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∏ –æ–±–Ω–æ–≤–ª—è–µ–º –æ–±—ä–µ–∫—Ç –∏–≥—Ä–æ–∫–∞
    if (!this.players[this.currentPlayer]) {
        this.players[this.currentPlayer] = {
            records: [],
            achievements: {},
            // totalScore: 0 // –£–¥–∞–ª–µ–Ω–æ totalScore
        };
    }
    
    // –î–æ–±–∞–≤–ª—è–µ–º –∑–∞–ø–∏—Å—å –æ —Ç–µ–∫—É—â–µ–π –∏–≥—Ä–µ
    this.players[this.currentPlayer].records.push({
      correct,
      total,
      percent,
      date: now.toLocaleDateString(),
      gameTime: gameTime,
      time: formattedTime,
      group: verbGroups[this.currentVerbGroupKey].name,
      // score: this.currentScore // –£–¥–∞–ª–µ–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –æ—á–∫–æ–≤ –∑–∞ —ç—Ç—É –∏–≥—Ä—É
    });

    // –£–¥–∞–ª–µ–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ–±—â–µ–≥–æ —Å—á–µ—Ç–∞ –∏–≥—Ä–æ–∫–∞
    // this.players[this.currentPlayer].totalScore = (this.players[this.currentPlayer].totalScore || 0) + this.currentScore;

    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ–º
    this.checkAchievements(correct, total);
    localStorage.setItem('verbPlayers', JSON.stringify(this.players));

    let html = `
      <h1 class="results-header">Results</h1>
      <div class="stats">
        <p class="player-name">Player: ${this.currentPlayer}</p>
        <p class="answered-count">You answered: ${this.results.length} verbs</p>
        <p class="correct-answers">Correct answers: <span class="correct-number">${correct}</span>/<span class="total-number">${total}</span></p>
        <p class="success-rate">Success rate: ${percent}%</p>
        <p>Time Taken: ${formattedTime}</p>
        </div>
      <div class="table-container">
        <table class="results-table">
          <thead>
            <tr>
              <th>Verb</th>
              <th>Your Past</th>
              <th>Your Part.</th>
              <th>Correct Past</th>
              <th>Correct Part.</th>
              <th>Translation</th>
            </tr>
          </thead>
          <tbody>
    `;
    this.results.forEach(r => {
      // –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ checkForm –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∫–ª–∞—Å—Å–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏
      const psClass = this.checkForm(r.yourPs.toLowerCase(), r.correctPs) ? 'correct' : 'wrong';
      const ppClass = this.checkForm(r.yourPp.toLowerCase(), r.correctPp) ? 'correct' : 'wrong';
      
      // –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ correctPs –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∫–Ω–æ–ø–∫–∏ –¥–ª—è –æ–∑–≤—É—á–∫–∏
      const correctPsButtons = r.correctPs.split(' ').map(part => 
          `<button class="play-table-audio-btn" data-word="${part}"></button>`
      ).join('');
      
      const correctPpButtons = r.correctPp.split(' ').map(part => 
          `<button class="play-table-audio-btn" data-word="${part}"></button>`
      ).join('');

      html += `
        <tr>
          <td>${r.verb} <button class="play-table-audio-btn" data-word="${r.verb}"></button></td>
          <td class="${psClass}">${r.yourPs}</td>
          <td class="${ppClass}">${r.yourPp}</td>
          <td>${r.correctPs} ${correctPsButtons}</td>
          <td>${r.correctPp} ${correctPpButtons}</td>
          <td>${r.ru}</td>
        </tr>
      `;
    });
    html += `
          </tbody>
        </table>
      </div>
      <button class="restart-btn" id="restartBtn">Play Again</button>
      ${this.getLeaderboardHTML()}
      ${this.getAchievementsHTML()}
      <button class="restart-btn" id="deleteMyResultsBtnBottom" style="background: #f44336; margin-top: 1rem;">Delete My Results</button>
    `;
    document.getElementById("mainContainer").innerHTML = html;
    
    document.querySelectorAll('.play-table-audio-btn').forEach(button => {
        button.addEventListener('click', (event) => {
            const wordToSpeak = event.target.dataset.word;
            this.playSpeech(wordToSpeak); // –û–∑–≤—É—á–∏–≤–∞–µ–º —Å–ª–æ–≤–æ, —É–∫–∞–∑–∞–Ω–Ω–æ–µ –≤ data-word
        });
    });

    document.getElementById("restartBtn").addEventListener("click", () => {
      this.showStartScreen();
    });
    document.getElementById("deleteMyResultsBtnBottom").addEventListener("click", () => {
      const name = prompt("Enter your name to delete results:");
      if (name && this.players[name]) {
        if (confirm(`Delete all results and achievements for ${name}?`)) {
          delete this.players[name];
          localStorage.setItem('verbPlayers', JSON.stringify(this.players));
          alert(`Results for ${name} deleted.`);
          localStorage.removeItem('lastPlayerName'); 
          localStorage.removeItem('lastVerbGroupKey');
          this.showStartScreen();
        }
      } else {
        alert("No results found for this name.");
      }
    });
    setTimeout(() => {
      window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' });
    }, 100);
  }

  getLeaderboardHTML() {
    const allScores = [];
    for (const playerName in this.players) {
        // –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ records —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
        const records = this.players[playerName].records || [];
        records.forEach(record => {
            allScores.push({
                name: playerName,
                correct: record.correct,
                total: record.total,
                percent: record.percent,
                date: record.date,
                gameTime: record.gameTime || 'N/A',
                time: record.time || 'N/A',
                group: record.group || 'N/A',
                // score: record.score || 0 // –£–¥–∞–ª–µ–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –æ—á–∫–æ–≤ –≤ –ª–∏–¥–µ—Ä–±–æ—Ä–¥
            });
        });
    }
    // –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞: —Å–Ω–∞—á–∞–ª–∞ –ø–æ –ø—Ä–æ—Ü–µ–Ω—Ç—É (—É–±—ã–≤–∞–Ω–∏–µ), –∑–∞—Ç–µ–º –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö (—É–±—ã–≤–∞–Ω–∏–µ), –∑–∞—Ç–µ–º –ø–æ –≤—Ä–µ–º–µ–Ω–∏ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è (–≤–æ–∑—Ä–∞—Å—Ç–∞–Ω–∏–µ)
    allScores.sort((a, b) => {
      if (b.percent !== a.percent) return b.percent - a.percent;
      if (b.correct !== a.correct) return b.correct - a.correct;
      // –£–¥–∞–ª–µ–Ω–∞ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –æ—á–∫–∞–º
      // if (b.score !== a.score) return b.score - a.score;
      
      const timeToSeconds = (timeStr) => {
          if (timeStr === 'N/A') return Infinity;
          const parts = timeStr.match(/(\d+)m\s*(\d+)s/);
          if (parts) {
              return parseInt(parts[1]) * 60 + parseInt(parts[2]);
          }
          return Infinity;
      };
      return timeToSeconds(a.time) - timeToSeconds(b.time);
    });

    let lbHtml = '<div class="leaderboard">';
    lbHtml += '<div class="leaderboard-title">LEADERBOARD</div>';
    if (allScores.length === 0) {
      lbHtml += '<p>No results yet.</p>';
    } else {
      lbHtml += '<ol>';
      allScores.slice(0, 10).forEach(p => {
        // –£–¥–∞–ª–µ–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ—á–∫–æ–≤ –≤ –ª–∏–¥–µ—Ä–±–æ—Ä–¥–µ
        lbHtml += `<li><strong>${p.name}</strong> (${p.group}): ${p.correct}/${p.total} (${p.percent}%) ‚Äî ${p.date} ${p.gameTime} (${p.time})</li>`;
      });
      lbHtml += '</ol>';
    }
    lbHtml += '</div>';
    return lbHtml;
  }

  // –ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è HTML-–ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π
  getAchievementsHTML() {
    const playerAchievements = this.players[this.currentPlayer] ? (this.players[this.currentPlayer].achievements || {}) : {};
    
    let html = `
      <div class="achievements">
        <div class="achievements-title">My Achievements</div>
        <div class="achievement-list">
    `;

    for (const key in achievements) {
      const achievement = achievements[key];
      const isUnlocked = playerAchievements[key];
      html += `
        <div class="achievement-item ${isUnlocked ? 'unlocked' : ''}">
          <span class="achievement-icon">${achievement.icon}</span>
          <div class="achievement-name">${achievement.name}</div>
          <div class="achievement-description">${achievement.description}</div>
        </div>
      `;
    }

    html += `
        </div>
      </div>
    `;
    return html;
  }

  // –ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π
  checkAchievements(correctAnswers, totalAnswers) {
    if (!this.players[this.currentPlayer]) return;

    const player = this.players[this.currentPlayer];
    let newAchievementUnlocked = false;

    // –î–æ—Å—Ç–∏–∂–µ–Ω–∏–µ "–ù–æ–≤–∏—á–æ–∫"
    if (!player.achievements.novice) {
      player.achievements.novice = true;
      this.showAchievementNotification(achievements.novice.name, achievements.novice.icon);
      newAchievementUnlocked = true;
    }

    // –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è "–ú–∞—Å—Ç–µ—Ä –≥—Ä—É–ø–ø—ã" (100% –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö)
    const currentGroupKey = this.currentVerbGroupKey;
    if (correctAnswers === totalAnswers) { // –ï—Å–ª–∏ –≤—Å–µ –æ—Ç–≤–µ—Ç—ã –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ
      const groupAchievementKey = `master_${currentGroupKey}`;
      if (achievements[groupAchievementKey] && !player.achievements[groupAchievementKey]) {
        player.achievements[groupAchievementKey] = true;
        this.showAchievementNotification(achievements[groupAchievementKey].name, achievements[groupAchievementKey].icon);
        newAchievementUnlocked = true;
      }
    }
    
    // –ï—Å–ª–∏ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã –Ω–æ–≤—ã–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è, —Å–æ—Ö—Ä–∞–Ω—è–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è
    if (newAchievementUnlocked) {
        localStorage.setItem('verbPlayers', JSON.stringify(this.players));
    }
  }

  // –ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± –∞—á–∏–≤–∫–µ
  showAchievementNotification(name, icon) {
    const notificationContainer = document.getElementById('achievementNotificationContainer');
    const notificationDiv = document.createElement('div');
    notificationDiv.className = 'achievement-notification';
    notificationDiv.innerHTML = `<strong>${icon} Achievement Unlocked! ${icon}</strong><br>${name}`;
    
    notificationContainer.appendChild(notificationDiv);

    // –£–¥–∞–ª—è–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –Ω–µ–∫–æ—Ç–æ—Ä–æ–µ –≤—Ä–µ–º—è
    setTimeout(() => {
      notificationDiv.remove();
    }, 2500); // –ê–Ω–∏–º–∞—Ü–∏—è –¥–ª–∏—Ç—Å—è 2.0s (0.5s slideIn + 1.5s fadeOut), —Ç–∞–∫ —á—Ç–æ 2.5s —Ö–≤–∞—Ç–∏—Ç
  }

} // –ö–æ–Ω–µ—Ü –∫–ª–∞—Å—Å–∞ VerbsTrainer

document.addEventListener('DOMContentLoaded', () => {
  new VerbsTrainer();
});
</script>
</body>
</html>
